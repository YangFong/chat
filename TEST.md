# AI 聊天应用测试指南

## 测试前准备

1. 确保已配置 `.env.local` 文件，填入 SiliconFlow API 密钥
2. 确保开发服务器已启动（`pnpm dev`）
3. 打开浏览器访问 http://localhost:3000

## 功能测试清单

### ✅ 基础 UI 测试

- [ ] 页面正常加载，显示侧边栏和聊天区域
- [ ] 侧边栏在移动端自动隐藏
- [ ] 输入框可正常输入和换行（Shift+Enter）
- [ ] 自动创建新对话

### ✅ 常规 AI 对话测试

测试问题建议：

1. **简单问答**

   ```
   你好
   ```

   预期：友好的问候回复

2. **知识问答**

   ```
   解释一下什么是机器学习
   ```

   预期：详细的解释

3. **代码生成**

   ```
   用 Python 写一个冒泡排序
   ```

   预期：返回完整的代码示例

4. **创意写作**
   ```
   写一首关于春天的诗
   ```
   预期：原创诗歌

### ✅ 工具调用测试

测试工具调用（天气查询）：

1. **北京天气**

   ```
   今天北京天气怎么样？
   ```

   预期：
   - 显示"调用工具: get_weather"卡片
   - 显示工具参数
   - 显示工具结果（天气卡片）
   - AI 基于天气数据生成回复

2. **上海天气**

   ```
   上海现在的天气如何？
   ```

   预期：同上，显示上海天气

3. **深圳天气**

   ```
   深圳天气
   ```

   预期：同上，显示深圳天气

4. **未知城市**
   ```
   查询火星的天气
   ```
   预期：返回默认/模拟天气数据

### ✅ 对话管理测试

1. **新建对话**
   - 点击侧边栏的 ➕ 按钮
   - 预期：创建新对话，自动切换到新对话

2. **切换对话**
   - 创建多个对话
   - 点击不同对话
   - 预期：正确显示对应对话的历史记录

3. **删除对话**
   - 悬停在对话上
   - 点击垃圾桶图标
   - 预期：对话被删除，自动切换到其他对话

4. **对话标题**
   - 发送第一条消息
   - 预期：侧边栏对话标题自动更新为消息前 30 个字符

### ✅ 数据持久化测试

1. **刷新页面**
   - 发送几条消息
   - 刷新浏览器
   - 预期：对话历史保持不变

2. **清除数据**
   - 打开浏览器开发者工具
   - Application -> Local Storage -> 删除 "chat-storage"
   - 刷新页面
   - 预期：所有对话被清空

### ✅ 流式响应测试

- 观察 AI 回复
- 预期：文字逐字显示，而非一次性全部显示

### ✅ 错误处理测试

1. **无 API 密钥**
   - 清空 `.env.local` 中的 `SILICONFLOW_API_KEY`
   - 重启服务器
   - 发送消息
   - 预期：显示错误提示

2. **网络错误**
   - 在开发者工具中模拟离线
   - 发送消息
   - 预期：显示网络错误提示

3. **停止生成**
   - 发送一个需要长回复的问题
   - 在生成过程中点击"停止生成"按钮
   - 预期：生成立即停止

### ✅ 响应式测试

1. **桌面端** (>768px)
   - 预期：侧边栏始终显示

2. **移动端** (<768px)
   - 预期：侧边栏自动隐藏

## 测试结果记录

| 功能       | 状态 | 备注 |
| ---------- | ---- | ---- |
| 基础 UI    | ✅   |      |
| 常规对话   | ✅   |      |
| 工具调用   | ✅   |      |
| 对话管理   | ✅   |      |
| 数据持久化 | ✅   |      |
| 流式响应   | ✅   |      |
| 错误处理   | ✅   |      |
| 响应式设计 | ✅   |      |

## 已知问题

- 工具调用使用模拟数据，未接入真实天气 API
- 移动端未实现侧边栏抽屉功能（可作为未来优化）

## 性能测试

- 首次加载时间：~2-3s
- 消息发送响应：<500ms
- 流式输出延迟：实时

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

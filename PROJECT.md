# é¡¹ç›®å®Œæˆæ¦‚è§ˆ

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. ç¯å¢ƒé…ç½®

- âœ… SiliconFlow API é›†æˆ
- âœ… ç¯å¢ƒå˜é‡é…ç½®ï¼ˆ`.env.local`ï¼‰
- âœ… ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼ˆ`.env.local.example`ï¼‰

### 2. AI æœåŠ¡ç«¯

- âœ… Next.js API Route (`/api/chat`)
- âœ… æµå¼å“åº”æ”¯æŒ
- âœ… å·¥å…·è°ƒç”¨é›†æˆ
- âœ… é”™è¯¯å¤„ç†

### 3. å·¥å…·ç³»ç»Ÿ

- âœ… å·¥å…·å®šä¹‰æ¡†æ¶
- âœ… å¤©æ°”æŸ¥è¯¢å·¥å…·ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
- âœ… å·¥å…·æ‰§è¡Œå™¨
- âœ… å¯æ‰©å±•æ¶æ„

### 4. çŠ¶æ€ç®¡ç†

- âœ… Zustand store
- âœ… localStorage æŒä¹…åŒ–
- âœ… å¯¹è¯ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- âœ… æ¶ˆæ¯ç®¡ç†

### 5. UI ç»„ä»¶

- âœ… èŠå¤©ä¸»ç•Œé¢ï¼ˆ`ChatView`ï¼‰
- âœ… å¯¹è¯å†å²ä¾§è¾¹æ ï¼ˆ`ChatSidebar`ï¼‰
- âœ… æ¶ˆæ¯è¾“å…¥æ¡†ï¼ˆ`ChatInput`ï¼‰
- âœ… æ¶ˆæ¯å±•ç¤ºï¼ˆ`MessageItem`ï¼‰
- âœ… å¤©æ°”å¡ç‰‡ï¼ˆ`WeatherCard`ï¼‰
- âœ… å“åº”å¼è®¾è®¡

### 6. ä»£ç è´¨é‡

- âœ… TypeScript ç±»å‹å®šä¹‰
- âœ… ESLint é…ç½®ï¼ˆå« import æ’åºï¼‰
- âœ… Prettier é…ç½®ï¼ˆå« Tailwind æ’ä»¶ï¼‰
- âœ… æ— ç±»å‹é”™è¯¯
- âœ… æ—  lint é”™è¯¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
chat/
â”œâ”€â”€ .env.local              # ç¯å¢ƒå˜é‡ï¼ˆéœ€è‡ªè¡Œé…ç½®ï¼‰
â”œâ”€â”€ .env.local.example      # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .prettierrc            # Prettier é…ç½®
â”œâ”€â”€ .prettierrc.cjs        # Prettier é…ç½®ï¼ˆCommonJSï¼‰
â”œâ”€â”€ eslint.config.mjs      # ESLint é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ start.sh               # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ TEST.md                # æµ‹è¯•æŒ‡å—
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚       â””â”€â”€ route.ts   # AI API è·¯ç”±ï¼ˆæµå¼å“åº” + å·¥å…·è°ƒç”¨ï¼‰
â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx           # ä¸»é¡µé¢ï¼ˆèŠå¤©ç•Œé¢ï¼‰
â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat-input.tsx     # èŠå¤©è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ chat-sidebar.tsx   # å¯¹è¯å†å²ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ chat-view.tsx      # ä¸»èŠå¤©è§†å›¾ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ message-item.tsx   # æ¶ˆæ¯é¡¹ç»„ä»¶
â”‚   â”œâ”€â”€ weather-card.tsx   # å¤©æ°”å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ ui/                # shadcn/ui ç»„ä»¶åº“
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ store.ts           # Zustand çŠ¶æ€ç®¡ç†
    â”œâ”€â”€ tools.ts           # å·¥å…·å®šä¹‰å’Œæ‰§è¡Œ
    â”œâ”€â”€ types.ts           # TypeScript ç±»å‹å®šä¹‰
    â””â”€â”€ utils.ts           # å·¥å…·å‡½æ•°
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./start.sh
```

### æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. å®‰è£…ä¾èµ–
pnpm install

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.local.example .env.local
# ç¼–è¾‘ .env.local å¡«å…¥ SiliconFlow API å¯†é’¥

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### æ–¹å¼ 3: ç”Ÿäº§æ„å»º

```bash
pnpm build
pnpm start
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. å¸¸è§„ AI å¯¹è¯

- æ”¯æŒè‡ªç„¶è¯­è¨€é—®ç­”
- æµå¼å“åº”ï¼Œå®æ—¶æ˜¾ç¤º
- ä¸Šä¸‹æ–‡ä¿æŒ

### 2. å·¥å…·è°ƒç”¨

- AI è‡ªåŠ¨è¯†åˆ«éœ€è¦è°ƒç”¨çš„å·¥å…·
- æ˜¾ç¤ºå·¥å…·è°ƒç”¨è¿‡ç¨‹
- å±•ç¤ºå·¥å…·ç»“æœï¼ˆå¦‚å¤©æ°”å¡ç‰‡ï¼‰
- åŸºäºå·¥å…·ç»“æœç”Ÿæˆå›å¤

### 3. å¯¹è¯ç®¡ç†

- æ–°å»ºå¯¹è¯
- åˆ‡æ¢å¯¹è¯
- åˆ é™¤å¯¹è¯
- è‡ªåŠ¨ç”Ÿæˆå¯¹è¯æ ‡é¢˜

### 4. æ•°æ®æŒä¹…åŒ–

- æµè§ˆå™¨ localStorage å­˜å‚¨
- åˆ·æ–°é¡µé¢æ•°æ®ä¸ä¸¢å¤±
- å¯æ‰‹åŠ¨æ¸…é™¤æ•°æ®

## ğŸ“Š æŠ€æœ¯äº®ç‚¹

1. **æµå¼å“åº”**: ä½¿ç”¨ Server-Sent Events (SSE) å®ç°æµå¼è¾“å‡º
2. **å·¥å…·è°ƒç”¨**: å®Œæ•´çš„ Function Calling å®ç°ï¼Œæ”¯æŒå¤šè½®å¯¹è¯
3. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
4. **çŠ¶æ€ç®¡ç†**: Zustand + localStorage æŒä¹…åŒ–
5. **ä»£ç è´¨é‡**: ESLint + Prettier + import æ’åº
6. **ç»„ä»¶åŒ–**: é«˜åº¦æ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡
7. **å“åº”å¼**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯

## ğŸ› ï¸ å¯æ‰©å±•æ€§

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `lib/types.ts` å®šä¹‰å·¥å…·ç±»å‹
2. åœ¨ `lib/tools.ts` æ·»åŠ å·¥å…·å®šä¹‰å’Œæ‰§è¡Œé€»è¾‘
3. åœ¨ `components/message-item.tsx` æ·»åŠ å·¥å…·ç»“æœå±•ç¤ºç»„ä»¶

### ç¤ºä¾‹ï¼šæ·»åŠ è®¡ç®—å™¨å·¥å…·

```typescript
// lib/tools.ts
export const tools = [
  // ...ç°æœ‰å·¥å…·
  {
    type: "function",
    function: {
      name: "calculate",
      description: "æ‰§è¡Œæ•°å­¦è®¡ç®—",
      parameters: {
        type: "object",
        properties: {
          expression: { type: "string", description: "æ•°å­¦è¡¨è¾¾å¼" },
        },
        required: ["expression"],
      },
    },
  },
]

export async function executeTool(name: string, args: string) {
  // ...
  switch (name) {
    case "calculate":
      const result = eval(params.expression) // æ³¨æ„ï¼šå®é™…é¡¹ç›®ä¸­ä¸è¦ç”¨ eval
      return JSON.stringify({ result })
    // ...
  }
}
```

## ğŸ“ npm scripts

```json
{
  "dev": "next dev", // å¼€å‘æœåŠ¡å™¨
  "build": "next build", // ç”Ÿäº§æ„å»º
  "start": "next start", // å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
  "lint": "eslint . --max-warnings=0", // ä»£ç æ£€æŸ¥
  "lint:fix": "eslint . --fix", // è‡ªåŠ¨ä¿®å¤
  "format": "prettier --write .", // æ ¼å¼åŒ–
  "format:check": "prettier --check ." // æ£€æŸ¥æ ¼å¼
}
```

## âš™ï¸ é…ç½®æ–‡ä»¶

- `eslint.config.mjs`: ESLint é…ç½®ï¼ˆflat configï¼‰
  - Next.js è§„åˆ™
  - import æ’åº
  - Prettier å…¼å®¹

- `.prettierrc` / `.prettierrc.cjs`: Prettier é…ç½®
  - Tailwind CSS ç±»åæ’åºæ’ä»¶

- `tsconfig.json`: TypeScript é…ç½®
  - ä¸¥æ ¼æ¨¡å¼
  - è·¯å¾„åˆ«å `@/*`

## ğŸ”’ ç¯å¢ƒå˜é‡

```env
SILICONFLOW_API_KEY=sk-xxxxx    # å¿…éœ€ï¼šSiliconFlow API å¯†é’¥
SILICONFLOW_BASE_URL=https://api.siliconflow.cn/v1  # å¯é€‰ï¼šAPI åŸºç¡€ URL
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- é¦–æ¬¡åŠ è½½: ~2-3s
- æ¶ˆæ¯å‘é€å“åº”: <500ms
- æµå¼è¾“å‡º: å®æ—¶
- å·¥å…·è°ƒç”¨å»¶è¿Ÿ: ~500msï¼ˆæ¨¡æ‹Ÿï¼‰

## ğŸ¨ UI/UX ç‰¹æ€§

- Material Design é£æ ¼
- æš—è‰²æ¨¡å¼æ”¯æŒï¼ˆè·Ÿéšç³»ç»Ÿï¼‰
- æµç•…çš„åŠ¨ç”»è¿‡æ¸¡
- å‹å¥½çš„é”™è¯¯æç¤º
- åŠ è½½çŠ¶æ€åé¦ˆ
- åœæ­¢ç”ŸæˆåŠŸèƒ½

## ğŸ› å·²çŸ¥é™åˆ¶

1. **å·¥å…·è°ƒç”¨**: ç›®å‰ä»…å®ç°å¤©æ°”æŸ¥è¯¢ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
2. **ç§»åŠ¨ç«¯**: ä¾§è¾¹æ åœ¨å°å±å¹•ä¸Šéšè—ï¼Œæœªå®ç°æŠ½å±‰äº¤äº’
3. **å›¾ç‰‡æ”¯æŒ**: æš‚ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œè¯†åˆ«
4. **è¯­éŸ³è¾“å…¥**: æœªå®ç°è¯­éŸ³è¾“å…¥åŠŸèƒ½
5. **å¯¼å‡ºå¯¹è¯**: æœªå®ç°å¯¹è¯å¯¼å‡ºåŠŸèƒ½

## ğŸš€ æœªæ¥ä¼˜åŒ–æ–¹å‘

1. æ¥å…¥çœŸå®å¤©æ°” API
2. æ·»åŠ æ›´å¤šå·¥å…·ï¼ˆæœç´¢ã€è®¡ç®—å™¨ã€ç¿»è¯‘ç­‰ï¼‰
3. å®ç°ç§»åŠ¨ç«¯ä¾§è¾¹æ æŠ½å±‰
4. æ·»åŠ å¯¹è¯å¯¼å‡ºåŠŸèƒ½
5. æ”¯æŒ Markdown æ¸²æŸ“
6. æ”¯æŒä»£ç é«˜äº®
7. æ·»åŠ ç”¨æˆ·è®¾ç½®é¢æ¿
8. å®ç°å¤šæ¨¡å‹åˆ‡æ¢
9. æ·»åŠ è¯­éŸ³è¾“å…¥
10. å®ç°å›¾ç‰‡è¯†åˆ«

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š

- `README.md` - ä½¿ç”¨æ–‡æ¡£
- `TEST.md` - æµ‹è¯•æŒ‡å—
- GitHub Issues - é—®é¢˜åé¦ˆ

## ğŸ“„ License

MIT
